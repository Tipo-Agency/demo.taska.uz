# –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ "–¢–æ–ª—å–∫–æ –û–±–ª–∞–∫–æ" (Firebase –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã)

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

### 1. Endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞–ø—Ä—è–º—É—é —Å Firebase
–í—Å–µ endpoints (`tasks.endpoint.ts`, `crm.endpoint.ts`, `funnels.endpoint.ts` –∏ —Ç.–¥.) —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `firestoreService` –Ω–∞–ø—Ä—è–º—É—é:
- ‚úÖ `getAll()` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑ Firebase
- ‚úÖ `create()`, `update()`, `delete()` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Firebase
- ‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç localStorage

### 2. useAppLogic –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Firebase
- ‚úÖ `loadAuthData()` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç users –∏–∑ Firebase
- ‚úÖ `loadMainData()` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Firebase
- ‚úÖ `loadTasksData()`, `loadCRMData()` –∏ —Ç.–¥. - –∑–∞–≥—Ä—É–∂–∞—é—Ç –º–æ–¥—É–ª–∏ –∏–∑ Firebase

## ‚ùå –ß—Ç–æ –Ω—É–∂–Ω–æ —É–±—Ä–∞—Ç—å

### 1. –£–±—Ä–∞—Ç—å `api.sync()`
- ‚ùå –£–¥–∞–ª–∏—Ç—å –∏–∑ `backend/api.ts`
- ‚ùå –£–±—Ä–∞—Ç—å –≤—Å–µ –≤—ã–∑–æ–≤—ã `api.sync()` (–µ—Å–ª–∏ –µ—Å—Ç—å)

### 2. –£–±—Ä–∞—Ç—å –º–µ—Ç–æ–¥—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑ storageService
- ‚ùå `loadFromCloud()` - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω
- ‚ùå `saveToCloud()` - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω
- ‚ùå –í—Å–µ –º–µ—Ç–æ–¥—ã `get*()` –∏ `set*()` –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (tasks, deals, clients –∏ —Ç.–¥.)

### 3. –û—Å—Ç–∞–≤–∏—Ç—å –≤ storageService —Ç–æ–ª—å–∫–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Å—Å–∏–∏
- ‚úÖ `getActiveUserId()`, `setActiveUserId()` - –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `getTelegramChatId()`, `setTelegramChatId()` - –¥–ª—è Telegram
- ‚úÖ `getEmployeeBotToken()`, `setEmployeeBotToken()` - –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ `getLastTelegramUpdateId()`, `setLastTelegramUpdateId()` - –¥–ª—è Telegram
- ‚úÖ `getEnableTelegramImport()`, `setEnableTelegramImport()` - –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

1. –£–±—Ä–∞—Ç—å `api.sync()` –∏–∑ `backend/api.ts` ‚úÖ
2. –ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ deprecated –º–µ—Ç–æ–¥—ã `loadFromCloud()` –∏ `saveToCloud()` –≤ `storageService.ts`
3. –£–±—Ä–∞—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã get/set –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ `storageService.ts`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–∏–≥–¥–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞
5. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
- ‚úÖ Firebase - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- ‚úÖ localStorage –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Å—Å–∏–∏
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –ü—Ä–æ—â–µ –∫–æ–¥, –ª–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
- ‚úÖ –î–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ
