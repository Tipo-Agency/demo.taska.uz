# Общее техническое задание: Система управления задачами tipa.taska.uz

## 1. Общая информация

### 1.1. Назначение системы
Система управления задачами `tipa.taska.uz` - это комплексная платформа для управления проектами, задачами, клиентами, финансами и бизнес-процессами компании.

### 1.2. Основные возможности
- Управление задачами и проектами
- CRM для управления клиентами и сделками
- Финансовое планирование и учет
- Управление документами и контентом
- Бизнес-процессы и автоматизация
- Управление складом
- Система уведомлений
- Интеграция с Telegram ботом

## 2. Архитектура системы

### 2.1. Компоненты
- **Frontend** - React + TypeScript (Vite)
- **Backend** - TypeScript (Firebase API)
- **Database** - Firebase Firestore
- **Storage** - Firebase Storage
- **Telegram Bot** - Python (python-telegram-bot)

### 2.2. Модули системы

1. **Tasks Module** - Управление задачами, идеями, функциями
2. **CRM Module** - Клиенты, сделки, договоры, воронки продаж
3. **Finance Module** - Финансовое планирование, заявки на покупку
4. **Content Module** - Документы, встречи, контент-план
5. **HR Module** - Сотрудники, должности, бизнес-процессы
6. **Inventory Module** - Управление складом
7. **Settings Module** - Настройки системы
8. **Notifications Module** - Система уведомлений

## 3. Пользователи и роли

### 3.1. Роли
- **ADMIN** - Администратор (полный доступ ко всем функциям)
- **EMPLOYEE** - Сотрудник (ограниченный доступ)

### 3.2. Права доступа
- Администраторы могут:
  - Управлять пользователями
  - Настраивать систему
  - Просматривать все данные
  - Удалять данные
- Сотрудники могут:
  - Создавать и редактировать свои задачи
  - Просматривать назначенные задачи
  - Работать с клиентами и сделками (в зависимости от назначения)

## 4. Основные функции

### 4.1. Управление задачами
- Создание, редактирование, удаление задач
- Назначение исполнителей
- Установка приоритетов и статусов
- Комментарии и вложения
- Представления: таблица, канбан, диаграмма Ганта

### 4.2. CRM
- Управление клиентами
- Воронки продаж
- Сделки и договоры
- Интеграция с Telegram и Instagram
- Дебиторская задолженность

### 4.3. Финансы
- Финансовое планирование
- Заявки на покупку
- Отчеты по доходам и расходам
- Управление отделами и категориями

### 4.4. Контент
- Документы (внутренние и внешние)
- Встречи и их резюме
- Контент-план для социальных сетей

### 4.5. Бизнес-процессы
- Создание процессов
- Автоматизация выполнения
- Интеграция с задачами

### 4.6. Уведомления
- Системные уведомления (Activity Logs)
- Telegram уведомления (личные и групповые)
- Настройка уведомлений для каждого типа события

## 5. Интеграции

### 5.1. Telegram бот
- Авторизация пользователей
- Управление задачами и сделками
- Уведомления
- Чат с лидами

### 5.2. Instagram
- Автоматическое создание лидов из комментариев
- Синхронизация через Meta Graph API

### 5.3. Сайты
- Создание лидов из форм на сайтах
- Webhook для получения данных

## 6. Безопасность

### 6.1. Аутентификация
- Кастомная система авторизации через Firebase
- Хеширование паролей (bcrypt)
- Сессии в localStorage

### 6.2. Авторизация
- Роли и права доступа
- Ограничение доступа к данным

### 6.3. Защита данных
- Firebase Security Rules
- Шифрование чувствительных данных
- Резервное копирование

## 7. Развертывание

### 7.1. Frontend
- Сборка через Vite
- Деплой на Nginx
- Автоматический деплой через GitHub Actions

### 7.2. Telegram Bot
- Запуск через systemd service
- Автоматический деплой через GitHub Actions
- Мониторинг через journalctl

## 8. Документация

### 8.1. Структура документации
- `docs/tz/README.md` - Навигация по документации
- `docs/tz/architecture/` - Архитектурная документация
- `docs/tz/database/` - Документация по БД
- `docs/tz/modules/` - ТЗ по модулям
- `docs/tz/telegram-bot/` - Документация по боту

### 8.2. Дополнительная документация
- `docs/CLOUD_ARCHITECTURE.md` - Архитектура облачной инфраструктуры
- `docs/INSTAGRAM_INTEGRATION.md` - Интеграция с Instagram
- `docs/SITES_API.md` - API для сайтов

## 9. Технические требования

### 9.1. Браузеры
- Chrome/Edge (последние версии)
- Firefox (последние версии)
- Safari (последние версии)

### 9.2. Устройства
- Desktop (основная платформа)
- Tablet (адаптивный дизайн)
- Mobile (базовая поддержка)

### 9.3. Производительность
- Время загрузки страницы < 3 секунд
- Время отклика на действия < 1 секунды
- Оптимизация для работы с большими объемами данных

## 10. Планы развития

### 10.1. Ближайшие планы
- Улучшение мобильной версии
- Расширение интеграций
- Улучшение аналитики

### 10.2. Долгосрочные планы
- Мобильное приложение
- Дополнительные интеграции
- Расширенная аналитика и отчетность
