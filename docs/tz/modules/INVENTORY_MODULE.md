# Техническое задание: Модуль склада (Inventory Module)

## 1. Общая информация

### 1.1. Назначение
Модуль склада предназначен для управления товарами, складами, движением товаров и остатками.

### 1.2. Компоненты модуля
- **Склады** - Управление складами
- **Товары** - Управление товарами
- **Движения** - Приход и расход товаров
- **Остатки** - Текущие остатки товаров на складах

## 2. Склады (Warehouses)

### 2.1. Создание склада

#### 2.1.1. Обязательные поля
- **name** (string) - Название склада

#### 2.1.2. Опциональные поля
- **address** (string) - Адрес склада

### 2.2. Управление складами
- Просмотр списка складов
- Редактирование склада
- Мягкое удаление (архив)
- Восстановление из архива

## 3. Товары (Inventory Items)

### 3.1. Создание товара

#### 3.1.1. Обязательные поля
- **name** (string) - Название товара
- **unit** (string) - Единица измерения (шт, кг, м, и т.д.)
- **warehouseId** (string) - ID склада

#### 3.1.2. Опциональные поля
- **description** (string) - Описание товара

### 3.2. Управление товарами
- Просмотр списка товаров
- Редактирование товара
- Фильтрация по складу
- Поиск по названию
- Мягкое удаление (архив)
- Восстановление из архива

## 4. Движения товаров (Stock Movements)

### 4.1. Создание движения

#### 4.1.1. Обязательные поля
- **itemId** (string) - ID товара
- **warehouseId** (string) - ID склада
- **type** (string) - Тип: 'in' (приход) или 'out' (расход)
- **quantity** (number) - Количество
- **date** (string) - Дата движения (YYYY-MM-DD)

#### 4.1.2. Опциональные поля
- **reason** (string) - Причина движения

### 4.2. Типы движений
- **in** - Приход товара на склад
- **out** - Расход товара со склада

### 4.3. Автоматический расчет остатков
- При создании движения автоматически обновляется остаток товара
- Остаток = сумма всех приходов - сумма всех расходов

## 5. Остатки (Stock Balances)

### 5.1. Автоматический расчет
- Остатки рассчитываются автоматически на основе движений
- Отображаются по каждому товару на каждом складе

### 5.2. Отображение остатков
- Список товаров с остатками
- Фильтрация по складу
- Поиск по названию товара
- Предупреждение о низких остатках

## 6. Интеграции

### 6.1. Интеграция с Finance модулем
- Связь движений товаров с финансовыми операциями
- Учет стоимости товаров

### 6.2. Интеграция с Notifications модулем
- Уведомления о низких остатках
- Уведомления о движении товаров

## 7. Технические детали

### 7.1. Компоненты
- `InventoryModule` - Основной компонент модуля
- `WarehousesView` - Представление складов
- `InventoryItemsView` - Представление товаров
- `StockMovementsView` - Представление движений
- `StockBalancesView` - Представление остатков

### 7.2. API Endpoints
- `GET /api/warehouses` - Получить все склады
- `POST /api/warehouses` - Создать склад
- `PUT /api/warehouses/:id` - Обновить склад
- `DELETE /api/warehouses/:id` - Удалить склад
- `GET /api/inventory/items` - Получить все товары
- `POST /api/inventory/items` - Создать товар
- `GET /api/inventory/movements` - Получить все движения
- `POST /api/inventory/movements` - Создать движение

### 7.3. Коллекции Firestore
- `warehouses` - Склады
- `inventoryItems` - Товары
- `stockMovements` - Движения товаров
- `stockBalances` - Остатки (вычисляемые)
